<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <!-- Cabeçalho -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
          <h2 class="fw-bold mb-1">
            <i class="bi bi-pencil-square me-2"></i>Edição de Produto
          </h2>
          <p class="text-muted mb-0">Atualize as informações do produto</p>
        </div>
        <a href="/products/read/{{product.id}}" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left me-2"></i>Voltar
        </a>
      </div>

      <!-- Alerta de Erro -->
      {{#if error}}
      <div class="alert alert-danger alert-dismissible fade show shadow-sm" role="alert">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        {{error}}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      {{/if}}

      <!-- Formulário -->
      <div class="card shadow-sm border-0">
        <div class="card-body p-4">
          <form action="/products/update/{{product.id}}" method="POST" enctype="multipart/form-data">
            <input type="hidden" name="_method" value="PUT">
            
            {{> fieldsProduct}}
            
            <!-- Imagem Atual -->
            <div class="mb-4 p-3 bg-light rounded">
              <label class="form-label fw-semibold">
                <i class="bi bi-image me-2"></i>Imagem Atual
              </label>
              <div class="text-center p-3">
                <img src="/{{product.image}}" alt="{{product.name}}" 
                  style="max-width: 300px; max-height: 300px; object-fit: contain;" 
                  class="img-thumbnail shadow-sm">
              </div>
              <small class="form-text text-muted">
                <i class="bi bi-info-circle me-1"></i>
                Faça upload de uma nova imagem apenas se quiser substituir a atual
              </small>
            </div>
            
            <!-- Botões de Ação -->
            <div class="d-flex justify-content-between align-items-center mt-4 pt-3 border-top">
              <a href="/products/read/{{product.id}}" class="btn btn-outline-secondary btn-lg">
                <i class="bi bi-x-circle me-2"></i>Cancelar
              </a>
              <button class="btn btn-success btn-lg px-5" type="submit">
                <i class="bi bi-check-circle me-2"></i>Salvar Alterações
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Informações de Auditoria (opcional - se tiver timestamps) -->
      <div class="card mt-4 border-0 bg-light">
        <div class="card-body">
          <h6 class="fw-semibold mb-3">
            <i class="bi bi-clock-history me-2"></i>Informações do Produto
          </h6>
          <div class="row small text-muted">
            <div class="col-md-6">
              <strong>ID:</strong> {{product.id}}
            </div>
            <div class="col-md-6">
              <strong>Estoque Atual:</strong> {{product.stock}} unidades
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>